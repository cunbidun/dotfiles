#!/bin/sh

# Loop through all attached batteries and format the info
for battery in /sys/class/power_supply/BAT?*; do
	# If non-first battery, print a space separator.
	[ -n "${capacity+x}" ] && printf " "
	# Sets up the status and capacity
	case "$(cat "$battery/status")" in
		"Full") status="^c#A3BE8C^" ;;
		"Discharging") status="^c#EBCB8B^" ;;
		"Charging") status="^c#88C0D0^" ;;
		"Not charging") status="" ;;
		"Unknown") status="^c#B48EAD^" ;;
	esac
	capacity=$(cat "$battery/capacity")
	# Prints the info
	printf "^c#81A1C1^BAT: ^d^%s%d%%^d^" "$status" "$capacity";
done
