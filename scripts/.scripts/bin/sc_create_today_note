#!/bin/sh

BASE_DIR="$HOME/zettelkasten"
NOTE_DIR="$BASE_DIR/daily"
TEMPLATE_PATH="$BASE_DIR/templates/daily.md"

mkdir -p "$NOTE_DIR"
cd "$NOTE_DIR" || notify-send "Could not create $NOTE_DIR"

file_name=$(date +"%Y-%m-%d.md")

if [ ! -f "$file_name" ]; then
	cp "$TEMPLATE_PATH" "$file_name"
	today_date=$(date +'%A, %B %eXX, %Y' | sed -e 's/11XX/11th/' -e 's/12XX/12th/' -e 's/13XX/13th/' -e 's/1XX/1st/' -e 's/2XX/2nd/' -e 's/3XX/3rd/' -e 's/XX/th/')
	sed -i "s/{{hdate}}/$today_date/g" "$file_name"
fi
