#!/bin/sh

case $BLOCK_BUTTON in
6) "$TERMINAL" -t "editdwmblock" -o "window.dimensions.columns=160" -o "window.dimensions.lines=40" -e "$EDITOR" "$0" ;;
esac

# Loop through all attached batteries and format the info
for battery in /sys/class/power_supply/BAT?*; do
	# If non-first battery, print a space separator.
	[ -n "${capacity+x}" ] && printf " "
	# Sets up the status and capacity
	case "$(cat "$battery/status")" in
	"Full") status="^c#A3BE8C^" ;;        # green
	"Discharging") status="^c#EBCB8B^" ;; # yellow
	"Charging") status="^c#88C0D0^" ;;    # cyan
	"Not charging") status="" ;;
	"Unknown") status="^c#B48EAD^" ;; # purple
	esac
	capacity=$(cat "$battery/capacity")
	# Prints the info
	printf "^c#81A1C1^BAT: ^d^%s%d%%^d^" "$status" "$capacity"
done
