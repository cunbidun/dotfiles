#!/bin/bash

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd)"
dotfiles="$DIR/dotfiles.txt"

sed "s|\$HOME|${HOME}|g" $dotfiles >$HOME/.cache/dotfile-picker.tmp
dotfiles="$HOME/.cache/dotfile-picker.tmp"

if [ $PICKER == "dmenu" ]; then
	extra_flags="-i -l"
fi
if [ $PICKER == "wofi" ]; then
	extra_flags="-d"
fi

path=$(grep -v "^#" $dotfiles | grep . | $PICKER $extra_flags -l 10 -p "select dotfile: ")

if [ -n "$path" ]; then
	notify-send -t 3000 "dotfiles picker" "editing $path"
	"$TERMINAL" -e "$EDITOR" "$path" >/dev/null 2>&1
fi
